---
title: "机器人奇妙小工具：一种在线插值"
date: 2025-12-22 15:22:00
tags: ["notes", "julyfun", "25", "12"]
author: "Julyfun M4"
os: "Darwin tutianpeikeladeMac-mini.local 24.3.0 Darwin Kernel Version 24.3.0: Thu Jan  2 20:22:58 PST 2025; root:xnu-11215.81.4~3/RELEASE_ARM64_T8132 arm64"
assume-you-know: [computer]
confidence: 2
---
代码: https://github.com/julyfun/robotoy
![[Pasted image 20251222152219.png]]
![[Pasted image 20251222152230.png]]
![[Pasted image 20251222152240.png]]
![[Pasted image 20251222152247.png]]
![image.png|500](https://how-to-1258460161.cos.ap-shanghai.myqcloud.com/how-to/20251222153125419.png)
![image.png|500](https://how-to-1258460161.cos.ap-shanghai.myqcloud.com/how-to/20251222154018606.png)
![image.png|500](https://how-to-1258460161.cos.ap-shanghai.myqcloud.com/how-to/20251222154040116.png)
![image.png|500](https://how-to-1258460161.cos.ap-shanghai.myqcloud.com/how-to/20251222154044182.png)
![image.png|500](https://how-to-1258460161.cos.ap-shanghai.myqcloud.com/how-to/20251222154907748.png)

## 使用方式
见 https://github.com/julyfun/robotoy/blob/main/robotoy/itp_state/tests/test_package.py
```python
itp_state = ItpState()
itp_state.init(v_max=v_max, a_max=a_max, j_max=j_max, fps=fps)
# config
itp_state = ItpState()
itp_state.init(v_max=v_max, a_max=a_max, j_max=j_max, fps=fps)

# set initial state
itp_state.init(x0=x0, v0=v0)
for i, (x, v, t) in enumerate(zip(x_samples, v_samples, t_samples)):
	points_needed = int((t - last_itpltn_t) * fps)
	res += itp_state.interpolate(
		arr(x), arr(v), points_needed, first_delta_t=(last_itpltn_t - t)
	)
```
```
